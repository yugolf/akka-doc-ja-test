

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Marshalling &#8212; Akka Documentation</title>
    
    <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '@version@',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../_static/toc.js"></script>
    <script type="text/javascript" src="../../../_static/prettify.js"></script>
    <script type="text/javascript" src="../../../_static/highlightCode.js"></script>
    <script type="text/javascript" src="../../../_static/effects.core.js"></script>
    <script type="text/javascript" src="../../../_static/effects.highlight.js"></script>
    <script type="text/javascript" src="../../../_static/scrollTo.js"></script>
    <script type="text/javascript" src="../../../_static/contentsFix.js"></script>
    <script type="text/javascript" src="../../../_static/ga.js"></script>
    <script type="text/javascript" src="../../../_static/warnOldDocs.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Akka Documentation" href="../../../index.html" />
    <link rel="up" title="Common Abstractions (Client- and Server-Side)" href="index.html" />
    <link rel="next" title="Unmarshalling" href="unmarshalling.html" />
    <link rel="prev" title="HTTP Model" href="http-model.html" />


  </head>
  <body role="document">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <div class="navbar-logo">
          <a href="http://akka.io"><img class="svg-logo" src="../../../_static/akka_full_color.svg" /></a>
        </div>
        <ul class="nav">
          <li><a href="http://akka.io/docs">Documentation</a></li>
          <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
          <li><a href="http://akka.io/downloads">Download</a></li>
          <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
          <li><a href="http://github.com/akka/akka">Code</a></li>
          <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Marshalling</div>
      <div class="pdf-link"><a href="../../../AkkaScala.pdf" title="Akka Scala Documentation"><img src="../../../_static/pdf-scala-icon.png" style="height: 40px;" /></a></div>
      <div class="pdf-link"><a href="../../../AkkaJava.pdf" title="Akka Java Documentation"><img src="../../../_static/pdf-java-icon.png" style="height: 40px;" /></a></div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">
              <li>
                 <span class="divider">|</span> <a href="unmarshalling.html">Unmarshalling</a> <span class="divider">»</span>
              </li>
              <li>
                <a href="../../../java.html">Java Contents</a> <span class="divider">|</span> <a href="../../../scala.html">Scala Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="http-model.html">HTTP Model</a> <span class="divider">|</span>
              </li>
              <li style="float: left">
                Version @version@
              </li>
              <li style="float: left">
                <input type="search" id="search" class="form-control" />
              </li>
            </ul>
          </div>
        </div>
        <div class="row"><div class="span9">
            
  <div class="section" id="marshalling">
<span id="http-marshalling-scala"></span><h1>Marshalling</h1>
<p>&quot;Marshalling&quot; is the process of converting a higher-level (object) structure into some kind of lower-level
representation, often a &quot;wire format&quot;. Other popular names for it are &quot;Serialization&quot; or &quot;Pickling&quot;.</p>
<p>In Akka HTTP &quot;Marshalling&quot; means the conversion of an object of type <code class="docutils literal"><span class="pre">T</span></code> into a lower-level target type,
e.g. a <code class="docutils literal"><span class="pre">MessageEntity</span></code> (which forms the &quot;entity body&quot; of an HTTP request or response) or a full <code class="docutils literal"><span class="pre">HttpRequest</span></code> or
<code class="docutils literal"><span class="pre">HttpResponse</span></code>.</p>
<div class="section" id="basic-design">
<h2>Basic Design</h2>
<p>Marshalling of instances of type <code class="docutils literal"><span class="pre">A</span></code> into instances of type <code class="docutils literal"><span class="pre">B</span></code> is performed by a <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code>.
Akka HTTP also predefines a number of helpful aliases for the types of marshallers that you'll likely work with most:</p>
<p>Contrary to what you might initially expect <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code> is not a plain function <code class="docutils literal"><span class="pre">A</span> <span class="pre">=&gt;</span> <span class="pre">B</span></code> but rather
essentially a function <code class="docutils literal"><span class="pre">A</span> <span class="pre">=&gt;</span> <span class="pre">Future[List[Marshalling[B]]]</span></code>.
Let's dissect this rather complicated looking signature piece by piece to understand what marshallers are designed this
way.
Given an instance of type <code class="docutils literal"><span class="pre">A</span></code> a <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code> produces:</p>
<p>1. A <code class="docutils literal"><span class="pre">Future</span></code>: This is probably quite clear. Marshallers are not required to synchronously produce a result, so instead
they return a future, which allows for asynchronicity in the marshalling process.</p>
<p>2. of <code class="docutils literal"><span class="pre">List</span></code>: Rather than only a single target representation for <code class="docutils literal"><span class="pre">A</span></code> marshallers can offer several ones. Which
one will be rendered onto the wire in the end is decided by content negotiation.
For example, the <code class="docutils literal"><span class="pre">ToEntityMarshaller[OrderConfirmation]</span></code> might offer a JSON as well as an XML representation.
The client can decide through the addition of an <code class="docutils literal"><span class="pre">Accept</span></code> request header which one is preferred. If the client doesn't
express a preference the first representation is picked.</p>
<p>3. of <code class="docutils literal"><span class="pre">Marshalling[B]</span></code>: Rather than returning an instance of <code class="docutils literal"><span class="pre">B</span></code> directly marshallers first produce a
<code class="docutils literal"><span class="pre">Marshalling[B]</span></code>. This allows for querying the <code class="docutils literal"><span class="pre">MediaType</span></code> and potentially the <code class="docutils literal"><span class="pre">HttpCharset</span></code> that the marshaller
will produce before the actual marshalling is triggered. Apart from enabling content negotiation this design allows for
delaying the actual construction of the marshalling target instance to the very last moment when it is really needed.</p>
<p>This is how <code class="docutils literal"><span class="pre">Marshalling</span></code> is defined:</p>
</div>
<div class="section" id="predefined-marshallers">
<h2>Predefined Marshallers</h2>
<p>Akka HTTP already predefines a number of marshallers for the most common types.
Specifically these are:</p>
<ul class="simple">
<li><a class="reference external" href="&#64;github&#64;/akka-http/src/main/scala/akka/http/scaladsl/marshalling/PredefinedToEntityMarshallers.scala">PredefinedToEntityMarshallers</a><ul>
<li><code class="docutils literal"><span class="pre">Array[Byte]</span></code></li>
<li><code class="docutils literal"><span class="pre">ByteString</span></code></li>
<li><code class="docutils literal"><span class="pre">Array[Char]</span></code></li>
<li><code class="docutils literal"><span class="pre">String</span></code></li>
<li><code class="docutils literal"><span class="pre">akka.http.scaladsl.model.FormData</span></code></li>
<li><code class="docutils literal"><span class="pre">akka.http.scaladsl.model.MessageEntity</span></code></li>
<li><code class="docutils literal"><span class="pre">T</span> <span class="pre">&lt;:</span> <span class="pre">akka.http.scaladsl.model.Multipart</span></code></li>
</ul>
</li>
<li><a class="reference external" href="&#64;github&#64;/akka-http/src/main/scala/akka/http/scaladsl/marshalling/PredefinedToResponseMarshallers.scala">PredefinedToResponseMarshallers</a><ul>
<li><code class="docutils literal"><span class="pre">T</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">HttpResponse</span></code></li>
<li><code class="docutils literal"><span class="pre">StatusCode</span></code></li>
<li><code class="docutils literal"><span class="pre">(StatusCode,</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">(Int,</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">(StatusCode,</span> <span class="pre">immutable.Seq[HttpHeader],</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">(Int,</span> <span class="pre">immutable.Seq[HttpHeader],</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
</ul>
</li>
<li><a class="reference external" href="&#64;github&#64;/akka-http/src/main/scala/akka/http/scaladsl/marshalling/PredefinedToRequestMarshallers.scala">PredefinedToRequestMarshallers</a><ul>
<li><code class="docutils literal"><span class="pre">HttpRequest</span></code></li>
<li><code class="docutils literal"><span class="pre">Uri</span></code></li>
<li><code class="docutils literal"><span class="pre">(HttpMethod,</span> <span class="pre">Uri,</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">(HttpMethod,</span> <span class="pre">Uri,</span> <span class="pre">immutable.Seq[HttpHeader],</span> <span class="pre">T)</span></code>, if a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available</li>
</ul>
</li>
<li><a class="reference external" href="&#64;github&#64;/akka-http/src/main/scala/akka/http/scaladsl/marshalling/GenericMarshallers.scala">GenericMarshallers</a><ul>
<li><code class="docutils literal"><span class="pre">Marshaller[Throwable,</span> <span class="pre">T]</span></code></li>
<li><code class="docutils literal"><span class="pre">Marshaller[Option[A],</span> <span class="pre">B]</span></code>, if a <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code> and an <code class="docutils literal"><span class="pre">EmptyValue[B]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">Marshaller[Either[A1,</span> <span class="pre">A2],</span> <span class="pre">B]</span></code>, if a <code class="docutils literal"><span class="pre">Marshaller[A1,</span> <span class="pre">B]</span></code> and a <code class="docutils literal"><span class="pre">Marshaller[A2,</span> <span class="pre">B]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">Marshaller[Future[A],</span> <span class="pre">B]</span></code>, if a <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code> is available</li>
<li><code class="docutils literal"><span class="pre">Marshaller[Try[A],</span> <span class="pre">B]</span></code>, if a <code class="docutils literal"><span class="pre">Marshaller[A,</span> <span class="pre">B]</span></code> is available</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="implicit-resolution">
<h2>Implicit Resolution</h2>
<p>The marshalling infrastructure of Akka HTTP relies on a type-class based approach, which means that <code class="docutils literal"><span class="pre">Marshaller</span></code>
instances from a certain type <code class="docutils literal"><span class="pre">A</span></code> to a certain type <code class="docutils literal"><span class="pre">B</span></code> have to be available implicitly.</p>
<p>The implicits for most of the predefined marshallers in Akka HTTP are provided through the companion object of the
<code class="docutils literal"><span class="pre">Marshaller</span></code> trait. This means that they are always available and never need to be explicitly imported.
Additionally, you can simply &quot;override&quot; them by bringing your own custom version into local scope.</p>
</div>
<div class="section" id="custom-marshallers">
<h2>Custom Marshallers</h2>
<p>Akka HTTP gives you a few convenience tools for constructing marshallers for your own types.
Before you do that you need to think about what kind of marshaller you want to create.
If all your marshaller needs to produce is a <code class="docutils literal"><span class="pre">MessageEntity</span></code> then you should probably provide a
<code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code>. The advantage here is that it will work on both the client- as well as the server-side since
a <code class="docutils literal"><span class="pre">ToResponseMarshaller[T]</span></code> as well as a <code class="docutils literal"><span class="pre">ToRequestMarshaller[T]</span></code> can automatically be created if a
<code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> is available.</p>
<p>If, however, your marshaller also needs to set things like the response status code, the request method, the request URI
or any headers then a <code class="docutils literal"><span class="pre">ToEntityMarshaller[T]</span></code> won't work. You'll need to fall down to providing a
<code class="docutils literal"><span class="pre">ToResponseMarshaller[T]</span></code> or a <code class="docutils literal"><span class="pre">ToRequestMarshaller[T]</span></code> directly.</p>
<p>For writing your own marshallers you won't have to &quot;manually&quot; implement the <code class="docutils literal"><span class="pre">Marshaller</span></code> trait directly.
Rather, it should be possible to use one of the convenience construction helpers defined on the <code class="docutils literal"><span class="pre">Marshaller</span></code>
companion:</p>
</div>
<div class="section" id="deriving-marshallers">
<h2>Deriving Marshallers</h2>
<p>Sometimes you can save yourself some work by reusing existing marshallers for your custom ones.
The idea is to &quot;wrap&quot; an existing marshaller with some logic to &quot;re-target&quot; it to your type.</p>
<p>In this regard wrapping a marshaller can mean one or both of the following two things:</p>
<ul class="simple">
<li>Transform the input before it reaches the wrapped marshaller</li>
<li>Transform the output of the wrapped marshaller</li>
</ul>
<p>For the latter (transforming the output) you can use <code class="docutils literal"><span class="pre">baseMarshaller.map</span></code>, which works exactly as it does for functions.
For the former (transforming the input) you have four alternatives:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">baseMarshaller.compose</span></code></li>
<li><code class="docutils literal"><span class="pre">baseMarshaller.composeWithEC</span></code></li>
<li><code class="docutils literal"><span class="pre">baseMarshaller.wrap</span></code></li>
<li><code class="docutils literal"><span class="pre">baseMarshaller.wrapWithEC</span></code></li>
</ul>
<p><code class="docutils literal"><span class="pre">compose</span></code> works just like it does for functions.
<code class="docutils literal"><span class="pre">wrap</span></code> is a compose that allows you to also change the <code class="docutils literal"><span class="pre">ContentType</span></code> that the marshaller marshals to.
The <code class="docutils literal"><span class="pre">...WithEC</span></code> variants allow you to receive an <code class="docutils literal"><span class="pre">ExecutionContext</span></code> internally if you need one, without having to
depend on one being available implicitly at the usage site.</p>
</div>
<div class="section" id="using-marshallers">
<h2>Using Marshallers</h2>
<p>In many places throughput Akka HTTP marshallers are used implicitly, e.g. when you define how to <a class="reference internal" href="../routing-dsl/directives/route-directives/complete.html#complete"><span class="std std-ref">complete</span></a> a
request using the <a class="reference internal" href="../routing-dsl/index.html#http-high-level-server-side-api"><span class="std std-ref">Routing DSL</span></a>.</p>
<p>However, you can also use the marshalling infrastructure directly if you wish, which can be useful for example in tests.
The best entry point for this is the <code class="docutils literal"><span class="pre">akka.http.scaladsl.marshalling.Marshal</span></code> object, which you can use like this:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">scala.concurrent.Await</span>
<span class="k">import</span> <span class="nn">scala.concurrent.duration._</span>
<span class="k">import</span> <span class="nn">akka.http.scaladsl.marshalling.Marshal</span>
<span class="k">import</span> <span class="nn">akka.http.scaladsl.model._</span>

<span class="k">import</span> <span class="nn">system.dispatcher</span> <span class="c1">// ExecutionContext</span>

<span class="k">val</span> <span class="n">string</span> <span class="k">=</span> <span class="s">&quot;Yeah&quot;</span>
<span class="k">val</span> <span class="n">entityFuture</span> <span class="k">=</span> <span class="nc">Marshal</span><span class="o">(</span><span class="n">string</span><span class="o">).</span><span class="n">to</span><span class="o">[</span><span class="kt">MessageEntity</span><span class="o">]</span>
<span class="k">val</span> <span class="n">entity</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">entityFuture</span><span class="o">,</span> <span class="mf">1.</span><span class="n">second</span><span class="o">)</span> <span class="c1">// don&#39;t block in non-test code!</span>
<span class="n">entity</span><span class="o">.</span><span class="n">contentType</span> <span class="n">shouldEqual</span> <span class="nc">ContentTypes</span><span class="o">.</span><span class="n">`text/plain(UTF-8)`</span>

<span class="k">val</span> <span class="n">errorMsg</span> <span class="k">=</span> <span class="s">&quot;Easy, pal!&quot;</span>
<span class="k">val</span> <span class="n">responseFuture</span> <span class="k">=</span> <span class="nc">Marshal</span><span class="o">(</span><span class="mi">420</span> <span class="o">-&gt;</span> <span class="n">errorMsg</span><span class="o">).</span><span class="n">to</span><span class="o">[</span><span class="kt">HttpResponse</span><span class="o">]</span>
<span class="k">val</span> <span class="n">response</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">responseFuture</span><span class="o">,</span> <span class="mf">1.</span><span class="n">second</span><span class="o">)</span> <span class="c1">// don&#39;t block in non-test code!</span>
<span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="n">shouldEqual</span> <span class="nc">StatusCodes</span><span class="o">.</span><span class="nc">EnhanceYourCalm</span>
<span class="n">response</span><span class="o">.</span><span class="n">entity</span><span class="o">.</span><span class="n">contentType</span> <span class="n">shouldEqual</span> <span class="nc">ContentTypes</span><span class="o">.</span><span class="n">`text/plain(UTF-8)`</span>

<span class="k">val</span> <span class="n">request</span> <span class="k">=</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="n">headers</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="n">headers</span><span class="o">.</span><span class="nc">Accept</span><span class="o">(</span><span class="nc">MediaTypes</span><span class="o">.</span><span class="n">`application/json`</span><span class="o">)))</span>
<span class="k">val</span> <span class="n">responseText</span> <span class="k">=</span> <span class="s">&quot;Plaintext&quot;</span>
<span class="k">val</span> <span class="n">respFuture</span> <span class="k">=</span> <span class="nc">Marshal</span><span class="o">(</span><span class="n">responseText</span><span class="o">).</span><span class="n">toResponseFor</span><span class="o">(</span><span class="n">request</span><span class="o">)</span> <span class="c1">// with content negotiation!</span>
<span class="n">a</span><span class="o">[</span><span class="kt">Marshal.UnacceptableResponseContentTypeException</span><span class="o">]</span> <span class="n">should</span> <span class="n">be</span> <span class="n">thrownBy</span> <span class="o">{</span>
  <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="n">respFuture</span><span class="o">,</span> <span class="mf">1.</span><span class="n">second</span><span class="o">)</span> <span class="c1">// client requested JSON, we only have text/plain!</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"></div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
  <div class="container">
    <ul>
      <li><h5>Akka</h5></li>
      <li><a href="http://akka.io/docs">Documentation</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
      <li><a href="http://akka.io/downloads">Downloads</a></li>
      <li><a href="http://akka.io/news">News</a></li>
      <li><a href="http://letitcrash.com">Blog</a></li>
    </ul>
    <ul>
      <li><h5>Contribute</h5></li>
      <li><a href="http://akka.io/community">Community Projects</a></li>
      <li><a href="http://github.com/akka/akka">Source Code</a></li>
      <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/project/issue-tracking.html">Report a Bug</a></li>
    </ul>
    <ul>
      <li><h5>Company</h5></li>
      <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
      <li><a href="http://akka.io/team">Team</a></li>
      <li><a href="mailto:info@lightbend.com">Contact</a></li>
    </ul>
    <ul>
      <li><img src="../../../_static/akka_icon_reverse.svg" align="center"/></li>
    </ul>
  </div>
  <div class="container copyright">
    <p style="float: left;">
      © 2015 <a href="http://www.lightbend.com/">Lightbend Inc.</a> <span class="license">Akka is Open Source and available under the Apache 2 License.</span>
    </p>
    <p style="float: right; font-size: 12px;">
      Last updated: 10月 15, 2016
    </p>
  </div>
</div>
<script type="text/javascript">
  var $toc = $('#toc');
  $toc.toc();

  // show clickable section sign when section header hovered:
  $('.section h2,.section h3,.section h4,.section h5').each(function(i, el) {
      var $el = $(el);
      $el.prepend($("<a class='section-marker' href='#" + $el.attr("id") + "'>&sect;</a>"))
  });
</script>

<!-- Algolia docs search -->
<script type="text/javascript">
  var version = DOCUMENTATION_OPTIONS.VERSION;

  var lang = "scala";
  var path = window.location.pathname;
  if (path.includes("/java/") || path.includes("java.html")) lang = "java";

  console.log("Search configured for:", lang, "@", version);

  docsearch({
    apiKey: '543bad5ad786495d9ccd445ed34ed082',
    indexName: 'akka_io',
    inputSelector: '#search',
    algoliaOptions: {
      hitsPerPage: 5,
      facetFilters: '[' + '["language:' + lang + '","language:general"]' + ',"version:' + version + '"]'
    }
  });

  // set up "/" as global shortcut for focusing on search
  $(document).keypress(function (event) {
    if (event.keyCode == 47) {
      $("#q").focus();
      return false; // swallow key event, otherwise the / char would be input into the search box
    }
  });
</script>

  

  </body>
</html>