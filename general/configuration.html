

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &#8212; Akka Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '@version@',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/toc.js"></script>
    <script type="text/javascript" src="../_static/prettify.js"></script>
    <script type="text/javascript" src="../_static/highlightCode.js"></script>
    <script type="text/javascript" src="../_static/effects.core.js"></script>
    <script type="text/javascript" src="../_static/effects.highlight.js"></script>
    <script type="text/javascript" src="../_static/scrollTo.js"></script>
    <script type="text/javascript" src="../_static/contentsFix.js"></script>
    <script type="text/javascript" src="../_static/ga.js"></script>
    <script type="text/javascript" src="../_static/warnOldDocs.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Akka Documentation" href="../index.html" />
    <link rel="up" title="General" href="index.html" />
    <link rel="next" title="Actors" href="../java/index-actors.html" />
    <link rel="prev" title="Message Delivery Reliability" href="message-delivery-reliability.html" />


  </head>
  <body role="document">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <div class="navbar-logo">
          <a href="http://akka.io"><img class="svg-logo" src="../_static/akka_full_color.svg" /></a>
        </div>
        <ul class="nav">
          <li><a href="http://akka.io/docs">Documentation</a></li>
          <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
          <li><a href="http://akka.io/downloads">Download</a></li>
          <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
          <li><a href="http://github.com/akka/akka">Code</a></li>
          <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Configuration</div>
      <div class="pdf-link"><a href="../AkkaScala.pdf" title="Akka Scala Documentation"><img src="../_static/pdf-scala-icon.png" style="height: 40px;" /></a></div>
      <div class="pdf-link"><a href="../AkkaJava.pdf" title="Akka Java Documentation"><img src="../_static/pdf-java-icon.png" style="height: 40px;" /></a></div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">
              <li>
                 <span class="divider">|</span> <a href="../java/index-actors.html">Actors</a> <span class="divider">»</span>
              </li>
              <li>
                <a href="../java.html">Java Contents</a> <span class="divider">|</span> <a href="../scala.html">Scala Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="message-delivery-reliability.html">Message Delivery Reliability</a> <span class="divider">|</span>
              </li>
              <li style="float: left">
                Version @version@
              </li>
              <li style="float: left">
                <input type="search" id="search" class="form-control" />
              </li>
            </ul>
          </div>
        </div>
        <div class="row"><div class="span9">
            
  <div class="section" id="configuration">
<span id="id1"></span><h1>Configuration</h1>
<p>You can start using Akka without defining any configuration, since sensible default values
are provided. Later on you might need to amend the settings to change the default behavior
or adapt for specific runtime environments. Typical examples of settings that you
might amend:</p>
<ul class="simple">
<li>log level and logger backend</li>
<li>enable remoting</li>
<li>message serializers</li>
<li>definition of routers</li>
<li>tuning of dispatchers</li>
</ul>
<p>Akka uses the <a class="reference external" href="https://github.com/typesafehub/config">Typesafe Config Library</a>, which might also be a good choice
for the configuration of your own application or library built with or without
Akka. This library is implemented in Java with no external dependencies; you
should have a look at its documentation (in particular about <a class="reference external" href="http://typesafehub.github.io/config/v1.2.0/com/typesafe/config/ConfigFactory.html">ConfigFactory</a>),
which is only summarized in the following.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">If you use Akka from the Scala REPL from the 2.9.x series,
and you do not provide your own ClassLoader to the ActorSystem,
start the REPL with &quot;-Yrepl-sync&quot; to work around a deficiency in
the REPLs provided Context ClassLoader.</p>
</div>
<div class="section" id="where-configuration-is-read-from">
<h2>Where configuration is read from</h2>
<p>All configuration for Akka is held within instances of <code class="xref py py-class docutils literal"><span class="pre">ActorSystem</span></code>, or
put differently, as viewed from the outside, <code class="xref py py-class docutils literal"><span class="pre">ActorSystem</span></code> is the only
consumer of configuration information. While constructing an actor system, you
can either pass in a <code class="xref py py-class docutils literal"><span class="pre">Config</span></code> object or not, where the second case is
equivalent to passing <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> (with the right class loader).
This means roughly that the default is to parse all <code class="docutils literal"><span class="pre">application.conf</span></code>,
<code class="docutils literal"><span class="pre">application.json</span></code> and <code class="docutils literal"><span class="pre">application.properties</span></code> found at the root of the
class path—please refer to the aforementioned documentation for details. The
actor system then merges in all <code class="docutils literal"><span class="pre">reference.conf</span></code> resources found at the root
of the class path to form the fallback configuration, i.e. it internally uses</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">appConfig</span><span class="o">.</span><span class="n">withFallback</span><span class="o">(</span><span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">defaultReference</span><span class="o">(</span><span class="n">classLoader</span><span class="o">))</span>
</pre></div>
</div>
<p>The philosophy is that code never contains default values, but instead relies
upon their presence in the <code class="docutils literal"><span class="pre">reference.conf</span></code> supplied with the library in
question.</p>
<p>Highest precedence is given to overrides given as system properties, see <a class="reference external" href="https://github.com/typesafehub/config/blob/master/HOCON.md">the
HOCON specification</a> (near the
bottom). Also noteworthy is that the application configuration—which defaults
to <code class="docutils literal"><span class="pre">application</span></code>—may be overridden using the <code class="docutils literal"><span class="pre">config.resource</span></code> property
(there are more, please refer to the <a class="reference external" href="https://github.com/typesafehub/config/blob/master/README.md">Config docs</a>).</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">If you are writing an Akka application, keep you configuration in
<code class="docutils literal"><span class="pre">application.conf</span></code> at the root of the class path. If you are writing an
Akka-based library, keep its configuration in <code class="docutils literal"><span class="pre">reference.conf</span></code> at the root
of the JAR file.</p>
</div>
</div>
<div class="section" id="when-using-jarjar-onejar-assembly-or-any-jar-bundler">
<h2>When using JarJar, OneJar, Assembly or any jar-bundler</h2>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">Akka's configuration approach relies heavily on the notion of every
module/jar having its own reference.conf file, all of these will be
discovered by the configuration and loaded. Unfortunately this also means
that if you put/merge multiple jars into the same jar, you need to merge all the
reference.confs as well. Otherwise all defaults will be lost and Akka will not function.</p>
</div>
<p>If you are using Maven to package your application, you can also make use of
the <a class="reference external" href="http://maven.apache.org/plugins/maven-shade-plugin">Apache Maven Shade Plugin</a> support for <a class="reference external" href="http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html#AppendingTransformer">Resource
Transformers</a>
to merge all the reference.confs on the build classpath into one.</p>
<p>The plugin configuration might look like this:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">maven</span><span class="o">.</span><span class="n">plugins</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">shade</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.5</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">executions</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">execution</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">phase</span><span class="o">&gt;</span><span class="n">package</span><span class="o">&lt;/</span><span class="n">phase</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">goals</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">goal</span><span class="o">&gt;</span><span class="n">shade</span><span class="o">&lt;/</span><span class="n">goal</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">goals</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">shadedArtifactAttached</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">shadedArtifactAttached</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">shadedClassifierName</span><span class="o">&gt;</span><span class="n">allinone</span><span class="o">&lt;/</span><span class="n">shadedClassifierName</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">artifactSet</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">includes</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">include</span><span class="o">&gt;*:*&lt;/</span><span class="n">include</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="n">includes</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">artifactSet</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">transformers</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">transformer</span>
       <span class="n">implementation</span><span class="o">=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">resource</span><span class="o">&gt;</span><span class="n">reference</span><span class="o">.</span><span class="n">conf</span><span class="o">&lt;/</span><span class="n">resource</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">transformer</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">transformer</span>
       <span class="n">implementation</span><span class="o">=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">manifestEntries</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nc">Main</span><span class="o">-</span><span class="nc">Class</span><span class="o">&gt;</span><span class="n">akka</span><span class="o">.</span><span class="nc">Main</span><span class="o">&lt;/</span><span class="nc">Main</span><span class="o">-</span><span class="nc">Class</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">manifestEntries</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">transformer</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">transformers</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">execution</span><span class="o">&gt;</span>
 <span class="o">&lt;/</span><span class="n">executions</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-application-conf">
<h2>Custom application.conf</h2>
<p>A custom <code class="docutils literal"><span class="pre">application.conf</span></code> might look like this:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span># In this file you can override any option defined in the reference files.
# Copy in parts of the reference files and modify as you please.

akka {

  # Loggers to register at boot time (akka.event.Logging$DefaultLogger logs
  # to STDOUT)
  loggers = [&quot;akka.event.slf4j.Slf4jLogger&quot;]

  # Log level used by the configured loggers (see &quot;loggers&quot;) as soon
  # as they have been started; before that, see &quot;stdout-loglevel&quot;
  # Options: OFF, ERROR, WARNING, INFO, DEBUG
  loglevel = &quot;DEBUG&quot;

  # Log level for the very basic logger activated during ActorSystem startup.
  # This logger prints the log messages to stdout (System.out).
  # Options: OFF, ERROR, WARNING, INFO, DEBUG
  stdout-loglevel = &quot;DEBUG&quot;

  # Filter of log events that is used by the LoggingAdapter before
  # publishing log events to the eventStream.
  logging-filter = &quot;akka.event.slf4j.Slf4jLoggingFilter&quot;

  actor {
    provider = &quot;cluster&quot;

    default-dispatcher {
      # Throughput for default Dispatcher, set to 1 for as fair as possible
      throughput = 10
    }
  }

  remote {
    # The port clients should connect to. Default is 2552.
    netty.tcp.port = 4711
  }
}
</pre></div>
</div>
</div>
<div class="section" id="including-files">
<h2>Including files</h2>
<p>Sometimes it can be useful to include another configuration file, for example if you have one <code class="docutils literal"><span class="pre">application.conf</span></code> with all
environment independent settings and then override some settings for specific environments.</p>
<p>Specifying system property with <code class="docutils literal"><span class="pre">-Dconfig.resource=/dev.conf</span></code> will load the <code class="docutils literal"><span class="pre">dev.conf</span></code> file, which includes the <code class="docutils literal"><span class="pre">application.conf</span></code></p>
<p>dev.conf:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s">&quot;application&quot;</span>

<span class="n">akka</span> <span class="o">{</span>
  <span class="n">loglevel</span> <span class="k">=</span> <span class="s">&quot;DEBUG&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>More advanced include and substitution mechanisms are explained in the <a class="reference external" href="https://github.com/typesafehub/config/blob/master/HOCON.md">HOCON</a>
specification.</p>
</div>
<div class="section" id="logging-of-configuration">
<span id="dakka-log-config-on-start"></span><h2>Logging of Configuration</h2>
<p>If the system or config property <code class="docutils literal"><span class="pre">akka.log-config-on-start</span></code> is set to <code class="docutils literal"><span class="pre">on</span></code>, then the
complete configuration is logged at INFO level when the actor system is started. This is
useful when you are uncertain of what configuration is used.</p>
<p>If in doubt, you can also easily and nicely inspect configuration objects
before or after using them to construct an actor system:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span>Welcome to Scala version @scalaVersion@ (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt; import com.typesafe.config._
import com.typesafe.config._

scala&gt; ConfigFactory.parseString(&quot;a.b=12&quot;)
res0: com.typesafe.config.Config = Config(SimpleConfigObject({&quot;a&quot; : {&quot;b&quot; : 12}}))

scala&gt; res0.root.render
res1: java.lang.String =
{
    # String: 1
    &quot;a&quot; : {
        # String: 1
        &quot;b&quot; : 12
    }
}
</pre></div>
</div>
<p>The comments preceding every item give detailed information about the origin of
the setting (file &amp; line number) plus possible comments which were present,
e.g. in the reference configuration. The settings as merged with the reference
and parsed by the actor system can be displayed like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">ActorSystem</span> <span class="n">system</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">system</span><span class="o">.</span><span class="na">settings</span><span class="o">());</span>
<span class="c1">// this is a shortcut for system.settings().config().root().render()</span>
</pre></div>
</div>
</div>
<div class="section" id="a-word-about-classloaders">
<h2>A Word About ClassLoaders</h2>
<p>In several places of the configuration file it is possible to specify the
fully-qualified class name of something to be instantiated by Akka. This is
done using Java reflection, which in turn uses a <code class="xref py py-class docutils literal"><span class="pre">ClassLoader</span></code>. Getting
the right one in challenging environments like application containers or OSGi
bundles is not always trivial, the current approach of Akka is that each
<code class="xref py py-class docutils literal"><span class="pre">ActorSystem</span></code> implementation stores the current thread’s context class
loader (if available, otherwise just its own loader as in
<code class="docutils literal"><span class="pre">this.getClass.getClassLoader</span></code>) and uses that for all reflective accesses.
This implies that putting Akka on the boot class path will yield
<code class="xref py py-class docutils literal"><span class="pre">NullPointerException</span></code> from strange places: this is simply not
supported.</p>
</div>
<div class="section" id="application-specific-settings">
<h2>Application specific settings</h2>
<p>The configuration can also be used for application specific settings.
A good practice is to place those settings in an Extension, as described in:</p>
<blockquote>
<div><ul class="simple">
<li>Scala API: <a class="reference internal" href="../scala/extending-akka.html#extending-akka-scala-settings"><span class="std std-ref">Application specific settings</span></a></li>
<li>Java API: <a class="reference internal" href="../java/extending-akka.html#extending-akka-java-settings"><span class="std std-ref">Application specific settings</span></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="configuring-multiple-actorsystem">
<h2>Configuring multiple ActorSystem</h2>
<p>If you have more than one <code class="docutils literal"><span class="pre">ActorSystem</span></code> (or you're writing a
library and have an <code class="docutils literal"><span class="pre">ActorSystem</span></code> that may be separate from the
application's) you may want to separate the configuration for each
system.</p>
<p>Given that <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> merges all resources with matching name
from the whole class path, it is easiest to utilize that functionality and
differentiate actor systems within the hierarchy of the configuration:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">myapp1</span> <span class="o">{</span>
  <span class="n">akka</span><span class="o">.</span><span class="n">loglevel</span> <span class="k">=</span> <span class="s">&quot;WARNING&quot;</span>
  <span class="n">my</span><span class="o">.</span><span class="n">own</span><span class="o">.</span><span class="n">setting</span> <span class="k">=</span> <span class="mi">43</span>
<span class="o">}</span>
<span class="n">myapp2</span> <span class="o">{</span>
  <span class="n">akka</span><span class="o">.</span><span class="n">loglevel</span> <span class="k">=</span> <span class="s">&quot;ERROR&quot;</span>
  <span class="n">app2</span><span class="o">.</span><span class="n">setting</span> <span class="k">=</span> <span class="s">&quot;appname&quot;</span>
<span class="o">}</span>
<span class="n">my</span><span class="o">.</span><span class="n">own</span><span class="o">.</span><span class="n">setting</span> <span class="k">=</span> <span class="mi">42</span>
<span class="n">my</span><span class="o">.</span><span class="n">other</span><span class="o">.</span><span class="n">setting</span> <span class="k">=</span> <span class="s">&quot;hello&quot;</span>
</pre></div>
</div>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">config</span> <span class="k">=</span> <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">load</span><span class="o">()</span>
<span class="k">val</span> <span class="n">app1</span> <span class="k">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;MyApp1&quot;</span><span class="o">,</span> <span class="n">config</span><span class="o">.</span><span class="n">getConfig</span><span class="o">(</span><span class="s">&quot;myapp1&quot;</span><span class="o">).</span><span class="n">withFallback</span><span class="o">(</span><span class="n">config</span><span class="o">))</span>
<span class="k">val</span> <span class="n">app2</span> <span class="k">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;MyApp2&quot;</span><span class="o">,</span>
  <span class="n">config</span><span class="o">.</span><span class="n">getConfig</span><span class="o">(</span><span class="s">&quot;myapp2&quot;</span><span class="o">).</span><span class="n">withOnlyPath</span><span class="o">(</span><span class="s">&quot;akka&quot;</span><span class="o">).</span><span class="n">withFallback</span><span class="o">(</span><span class="n">config</span><span class="o">))</span>
</pre></div>
</div>
<p>These two samples demonstrate different variations of the “lift-a-subtree”
trick: in the first case, the configuration accessible from within the actor
system is this</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">akka</span><span class="o">.</span><span class="n">loglevel</span> <span class="o">=</span> <span class="s2">&quot;WARNING&quot;</span>
<span class="n">my</span><span class="o">.</span><span class="n">own</span><span class="o">.</span><span class="n">setting</span> <span class="o">=</span> <span class="mi">43</span>
<span class="n">my</span><span class="o">.</span><span class="n">other</span><span class="o">.</span><span class="n">setting</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="sr">//</span> <span class="n">plus</span> <span class="n">myapp1</span> <span class="ow">and</span> <span class="n">myapp2</span> <span class="n">subtrees</span>
</pre></div>
</div>
<p>while in the second one, only the “akka” subtree is lifted, with the following
result</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">akka</span><span class="o">.</span><span class="n">loglevel</span> <span class="o">=</span> <span class="s2">&quot;ERROR&quot;</span>
<span class="n">my</span><span class="o">.</span><span class="n">own</span><span class="o">.</span><span class="n">setting</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">my</span><span class="o">.</span><span class="n">other</span><span class="o">.</span><span class="n">setting</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
<span class="sr">//</span> <span class="n">plus</span> <span class="n">myapp1</span> <span class="ow">and</span> <span class="n">myapp2</span> <span class="n">subtrees</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The configuration library is really powerful, explaining all features exceeds
the scope affordable here. In particular not covered are how to include other
configuration files within other files (see a small example at <a class="reference internal" href="#including-files">Including
files</a>) and copying parts of the configuration tree by way of path
substitutions.</p>
</div>
<p>You may also specify and parse the configuration programmatically in other ways when instantiating
the <code class="docutils literal"><span class="pre">ActorSystem</span></code>.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">akka.actor.ActorSystem</span>
<span class="k">import</span> <span class="nn">com.typesafe.config.ConfigFactory</span>
    <span class="k">val</span> <span class="n">customConf</span> <span class="k">=</span> <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">      akka.actor.deployment {</span>
<span class="s">        /my-service {</span>
<span class="s">          router = round-robin-pool</span>
<span class="s">          nr-of-instances = 3</span>
<span class="s">        }</span>
<span class="s">      }</span>
<span class="s">      &quot;&quot;&quot;</span><span class="o">)</span>
    <span class="c1">// ConfigFactory.load sandwiches customConfig between default reference</span>
    <span class="c1">// config and default overrides, and then resolves it.</span>
    <span class="k">val</span> <span class="n">system</span> <span class="k">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;MySystem&quot;</span><span class="o">,</span> <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">load</span><span class="o">(</span><span class="n">customConf</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-configuration-from-a-custom-location">
<h2>Reading configuration from a custom location</h2>
<p>You can replace or supplement <code class="docutils literal"><span class="pre">application.conf</span></code> either in code
or using system properties.</p>
<p>If you're using <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> (which Akka does by
default) you can replace <code class="docutils literal"><span class="pre">application.conf</span></code> by defining
<code class="docutils literal"><span class="pre">-Dconfig.resource=whatever</span></code>, <code class="docutils literal"><span class="pre">-Dconfig.file=whatever</span></code>, or
<code class="docutils literal"><span class="pre">-Dconfig.url=whatever</span></code>.</p>
<p>From inside your replacement file specified with
<code class="docutils literal"><span class="pre">-Dconfig.resource</span></code> and friends, you can <code class="docutils literal"><span class="pre">include</span>
<span class="pre">&quot;application&quot;</span></code> if you still want to use
<code class="docutils literal"><span class="pre">application.{conf,json,properties}</span></code> as well.  Settings
specified before <code class="docutils literal"><span class="pre">include</span> <span class="pre">&quot;application&quot;</span></code> would be overridden by
the included file, while those after would override the included
file.</p>
<p>In code, there are many customization options.</p>
<p>There are several overloads of <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code>; these
allow you to specify something to be sandwiched between system
properties (which override) and the defaults (from
<code class="docutils literal"><span class="pre">reference.conf</span></code>), replacing the usual
<code class="docutils literal"><span class="pre">application.{conf,json,properties}</span></code> and replacing
<code class="docutils literal"><span class="pre">-Dconfig.file</span></code> and friends.</p>
<p>The simplest variant of <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> takes a resource
basename (instead of <code class="docutils literal"><span class="pre">application</span></code>); <code class="docutils literal"><span class="pre">myname.conf</span></code>,
<code class="docutils literal"><span class="pre">myname.json</span></code>, and <code class="docutils literal"><span class="pre">myname.properties</span></code> would then be used
instead of <code class="docutils literal"><span class="pre">application.{conf,json,properties}</span></code>.</p>
<p>The most flexible variant takes a <code class="docutils literal"><span class="pre">Config</span></code> object, which
you can load using any method in <code class="docutils literal"><span class="pre">ConfigFactory</span></code>.  For example
you could put a config string in code using
<code class="docutils literal"><span class="pre">ConfigFactory.parseString()</span></code> or you could make a map and
<code class="docutils literal"><span class="pre">ConfigFactory.parseMap()</span></code>, or you could load a file.</p>
<p>You can also combine your custom config with the usual config,
that might look like:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="c1">// make a Config with just your special setting</span>
<span class="nc">Config</span> <span class="n">myConfig</span> <span class="k">=</span>
  <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">parseString</span><span class="o">(</span><span class="s">&quot;something=somethingElse&quot;</span><span class="o">);</span>
<span class="c1">// load the normal config stack (system props,</span>
<span class="c1">// then application.conf, then reference.conf)</span>
<span class="nc">Config</span> <span class="n">regularConfig</span> <span class="k">=</span>
  <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">load</span><span class="o">();</span>
<span class="c1">// override regular stack with myConfig</span>
<span class="nc">Config</span> <span class="n">combined</span> <span class="k">=</span>
  <span class="n">myConfig</span><span class="o">.</span><span class="n">withFallback</span><span class="o">(</span><span class="n">regularConfig</span><span class="o">);</span>
<span class="c1">// put the result in between the overrides</span>
<span class="c1">// (system props) and defaults again</span>
<span class="nc">Config</span> <span class="n">complete</span> <span class="k">=</span>
  <span class="nc">ConfigFactory</span><span class="o">.</span><span class="n">load</span><span class="o">(</span><span class="n">combined</span><span class="o">);</span>
<span class="c1">// create ActorSystem</span>
<span class="nc">ActorSystem</span> <span class="n">system</span> <span class="k">=</span>
  <span class="nc">ActorSystem</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="s">&quot;myname&quot;</span><span class="o">,</span> <span class="n">complete</span><span class="o">);</span>
</pre></div>
</div>
<p>When working with <code class="docutils literal"><span class="pre">Config</span></code> objects, keep in mind that there are
three &quot;layers&quot; in the cake:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">ConfigFactory.defaultOverrides()</span></code> (system properties)</li>
<li>the app's settings</li>
<li><code class="docutils literal"><span class="pre">ConfigFactory.defaultReference()</span></code> (reference.conf)</li>
</ul>
</div></blockquote>
<p>The normal goal is to customize the middle layer while leaving the
other two alone.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> loads the whole stack</li>
<li>the overloads of <code class="docutils literal"><span class="pre">ConfigFactory.load()</span></code> let you specify a
different middle layer</li>
<li>the <code class="docutils literal"><span class="pre">ConfigFactory.parse()</span></code> variations load single files or resources</li>
</ul>
</div></blockquote>
<p>To stack two layers, use <code class="docutils literal"><span class="pre">override.withFallback(fallback)</span></code>; try
to keep system props (<code class="docutils literal"><span class="pre">defaultOverrides()</span></code>) on top and
<code class="docutils literal"><span class="pre">reference.conf</span></code> (<code class="docutils literal"><span class="pre">defaultReference()</span></code>) on the bottom.</p>
<p>Do keep in mind, you can often just add another <code class="docutils literal"><span class="pre">include</span></code>
statement in <code class="docutils literal"><span class="pre">application.conf</span></code> rather than writing code.
Includes at the top of <code class="docutils literal"><span class="pre">application.conf</span></code> will be overridden by
the rest of <code class="docutils literal"><span class="pre">application.conf</span></code>, while those at the bottom will
override the earlier stuff.</p>
</div>
<div class="section" id="actor-deployment-configuration">
<h2>Actor Deployment Configuration</h2>
<p>Deployment settings for specific actors can be defined in the <code class="docutils literal"><span class="pre">akka.actor.deployment</span></code>
section of the configuration. In the deployment section it is possible to define
things like dispatcher, mailbox, router settings, and remote deployment.
Configuration of these features are described in the chapters detailing corresponding
topics. An example may look like this:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span>akka.actor.deployment {

  # &#39;/user/actorA/actorB&#39; is a remote deployed actor
  /actorA/actorB {
    remote = &quot;akka.tcp://sampleActorSystem@127.0.0.1:2553&quot;
  }
  
  # all direct children of &#39;/user/actorC&#39; have a dedicated dispatcher 
  &quot;/actorC/*&quot; {
    dispatcher = my-dispatcher
  }

  # all descendants of &#39;/user/actorC&#39; (direct children, and their children recursively)
  # have a dedicated dispatcher
  &quot;/actorC/**&quot; {
    dispatcher = my-dispatcher
  }
  
  # &#39;/user/actorD/actorE&#39; has a special priority mailbox
  /actorD/actorE {
    mailbox = prio-mailbox
  }
  
  # &#39;/user/actorF/actorG/actorH&#39; is a random pool
  /actorF/actorG/actorH {
    router = random-pool
    nr-of-instances = 5
  }
}

my-dispatcher {
  fork-join-executor.parallelism-min = 10
  fork-join-executor.parallelism-max = 10
}
prio-mailbox {
  mailbox-type = &quot;a.b.MyPrioMailbox&quot;
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The deployment section for a specific actor is identified by the
path of the actor relative to <code class="docutils literal"><span class="pre">/user</span></code>.</p>
</div>
<p>You can use asterisks as wildcard matches for the actor path sections, so you could specify:
<code class="docutils literal"><span class="pre">/*/sampleActor</span></code> and that would match all <code class="docutils literal"><span class="pre">sampleActor</span></code> on that level in the hierarchy.
In addition, please note:</p>
<blockquote>
<div><ul class="simple">
<li>you can also use wildcards in the last position to match all actors at a certain level: <code class="docutils literal"><span class="pre">/someParent/*</span></code></li>
<li>you can use double-wildcards in the last position to match all child actors and their children
recursively: <code class="docutils literal"><span class="pre">/someParent/**</span></code></li>
<li>non-wildcard matches always have higher priority to match than wildcards, and single wildcard matches
have higher priority than double-wildcards, so: <code class="docutils literal"><span class="pre">/foo/bar</span></code> is considered <strong>more specific</strong> than
<code class="docutils literal"><span class="pre">/foo/*</span></code>, which is considered <strong>more specific</strong> than <code class="docutils literal"><span class="pre">/foo/**</span></code>. Only the highest priority match is used</li>
<li>wildcards <strong>cannot</strong> be used to partially match section, like this: <code class="docutils literal"><span class="pre">/foo*/bar</span></code>, <code class="docutils literal"><span class="pre">/f*o/bar</span></code> etc.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Double-wildcards can only be placed in the last position.</p>
</div>
</div>
<div class="section" id="listing-of-the-reference-configuration">
<h2>Listing of the Reference Configuration</h2>
<p>Each Akka module has a reference configuration file with the default values.</p>
<div class="section" id="akka-actor">
<span id="config-akka-actor"></span><h3>akka-actor</h3>
</div>
<div class="section" id="akka-agent">
<span id="config-akka-agent"></span><h3>akka-agent</h3>
</div>
<div class="section" id="akka-camel">
<span id="config-akka-camel"></span><h3>akka-camel</h3>
</div>
<div class="section" id="akka-cluster">
<span id="config-akka-cluster"></span><h3>akka-cluster</h3>
</div>
<div class="section" id="akka-multi-node-testkit">
<span id="config-akka-multi-node-testkit"></span><h3>akka-multi-node-testkit</h3>
</div>
<div class="section" id="akka-persistence">
<span id="config-akka-persistence"></span><h3>akka-persistence</h3>
</div>
<div class="section" id="akka-remote">
<span id="config-akka-remote"></span><h3>akka-remote</h3>
</div>
<div class="section" id="akka-remote-artery">
<span id="config-akka-remote-artery"></span><h3>akka-remote (artery)</h3>
</div>
<div class="section" id="akka-testkit">
<span id="config-akka-testkit"></span><h3>akka-testkit</h3>
<p id="config-cluster-metrics">akka-cluster-metrics
~~~~~~~~~~~~--------</p>
<p id="config-cluster-tools">akka-cluster-tools
~~~~~~~~~~~~------</p>
<p id="config-cluster-sharding">akka-cluster-sharding
~~~~~~~~~~~~---------</p>
<p id="config-distributed-data">akka-distributed-data
~~~~~~~~~~~~---------</p>
</div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"></div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
  <div class="container">
    <ul>
      <li><h5>Akka</h5></li>
      <li><a href="http://akka.io/docs">Documentation</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
      <li><a href="http://akka.io/downloads">Downloads</a></li>
      <li><a href="http://akka.io/news">News</a></li>
      <li><a href="http://letitcrash.com">Blog</a></li>
    </ul>
    <ul>
      <li><h5>Contribute</h5></li>
      <li><a href="http://akka.io/community">Community Projects</a></li>
      <li><a href="http://github.com/akka/akka">Source Code</a></li>
      <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/project/issue-tracking.html">Report a Bug</a></li>
    </ul>
    <ul>
      <li><h5>Company</h5></li>
      <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
      <li><a href="http://akka.io/team">Team</a></li>
      <li><a href="mailto:info@lightbend.com">Contact</a></li>
    </ul>
    <ul>
      <li><img src="../_static/akka_icon_reverse.svg" align="center"/></li>
    </ul>
  </div>
  <div class="container copyright">
    <p style="float: left;">
      © 2015 <a href="http://www.lightbend.com/">Lightbend Inc.</a> <span class="license">Akka is Open Source and available under the Apache 2 License.</span>
    </p>
    <p style="float: right; font-size: 12px;">
      Last updated: 10月 15, 2016
    </p>
  </div>
</div>
<script type="text/javascript">
  var $toc = $('#toc');
  $toc.toc();

  // show clickable section sign when section header hovered:
  $('.section h2,.section h3,.section h4,.section h5').each(function(i, el) {
      var $el = $(el);
      $el.prepend($("<a class='section-marker' href='#" + $el.attr("id") + "'>&sect;</a>"))
  });
</script>

<!-- Algolia docs search -->
<script type="text/javascript">
  var version = DOCUMENTATION_OPTIONS.VERSION;

  var lang = "scala";
  var path = window.location.pathname;
  if (path.includes("/java/") || path.includes("java.html")) lang = "java";

  console.log("Search configured for:", lang, "@", version);

  docsearch({
    apiKey: '543bad5ad786495d9ccd445ed34ed082',
    indexName: 'akka_io',
    inputSelector: '#search',
    algoliaOptions: {
      hitsPerPage: 5,
      facetFilters: '[' + '["language:' + lang + '","language:general"]' + ',"version:' + version + '"]'
    }
  });

  // set up "/" as global shortcut for focusing on search
  $(document).keypress(function (event) {
    if (event.keyCode == 47) {
      $("#q").focus();
      return false; // swallow key event, otherwise the / char would be input into the search box
    }
  });
</script>

  

  </body>
</html>